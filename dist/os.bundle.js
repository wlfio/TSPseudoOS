!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=13)}([function(t,r){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],e=0;e<t.length;e++)r.push(255&t.charCodeAt(e));return r},bytesToString:function(t){for(var r=[],e=0;e<t.length;e++)r.push(String.fromCharCode(t[e]));return r.join("")}}};t.exports=e},,,function(t,r,e){(function(r){var n,o,i,u;n=e(10),o=e(0).utf8,i=e(0).bin,(u=function(t,e){var u=n.wordsToBytes(function(t){t.constructor==String?t=o.stringToBytes(t):void 0!==r&&"function"==typeof r.isBuffer&&r.isBuffer(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());var e=n.bytesToWords(t),i=8*t.length,u=[],s=1732584193,a=-271733879,c=-1732584194,f=271733878,h=-1009589776;e[i>>5]|=128<<24-i%32,e[15+(i+64>>>9<<4)]=i;for(var l=0;l<e.length;l+=16){for(var p=s,d=a,g=c,y=f,m=h,v=0;v<80;v++){if(v<16)u[v]=e[l+v];else{var w=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=w<<1|w>>>31}var b=(s<<5|s>>>27)+h+(u[v]>>>0)+(v<20?1518500249+(a&c|~a&f):v<40?1859775393+(a^c^f):v<60?(a&c|a&f|c&f)-1894007588:(a^c^f)-899497514);h=f,f=c,c=a<<30|a>>>2,a=s,s=b}s+=p,a+=d,c+=g,f+=y,h+=m}return[s,a,c,f,h]}(t));return e&&e.asBytes?u:e&&e.asString?i.bytesToString(u):n.bytesToHex(u)})._blocksize=16,u._digestsize=20,t.exports=u}).call(this,e(5).Buffer)},,function(t,r,e){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=e(7),o=e(8),i=e(9);function u(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,r){if(u()<r)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=a.prototype:(null===t&&(t=new a(r)),t.length=r),t}function a(t,r,e){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,r,e)}function c(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n);a.TYPED_ARRAY_SUPPORT?(t=r).__proto__=a.prototype:t=l(t,r);return t}(t,r,e,n):"string"==typeof r?function(t,r,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(r,e),o=(t=s(t,n)).write(r,e);o!==n&&(t=t.slice(0,o));return t}(t,r,e):function(t,r){if(a.isBuffer(r)){var e=0|p(r.length);return 0===(t=s(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(n=r.length)!=n?s(t,0):l(t,r);if("Buffer"===r.type&&i(r.data))return l(t,r.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,r){if(f(r),t=s(t,r<0?0:0|p(r)),!a.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r){var e=r.length<0?0:0|p(r.length);t=s(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function p(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function d(t,r){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return z(t).length;default:if(n)return N(t).length;r=(""+r).toLowerCase(),n=!0}}function g(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,r,e);case"utf8":case"utf-8":return T(this,r,e);case"ascii":return _(this,r,e);case"latin1":case"binary":return x(this,r,e);case"base64":return R(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function m(t,r,e,n,o){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=o?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(o)return-1;e=t.length-1}else if(e<0){if(!o)return-1;e=0}if("string"==typeof r&&(r=a.from(r,n)),a.isBuffer(r))return 0===r.length?-1:v(t,r,e,n,o);if("number"==typeof r)return r&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):v(t,[r],e,n,o);throw new TypeError("val must be string, number or Buffer")}function v(t,r,e,n,o){var i,u=1,s=t.length,a=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,s/=2,a/=2,e/=2}function c(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(o){var f=-1;for(i=e;i<s;i++)if(c(t,i)===c(r,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===a)return f*u}else-1!==f&&(i-=i-f),f=-1}else for(e+a>s&&(e=s-a),i=e;i>=0;i--){for(var h=!0,l=0;l<a;l++)if(c(t,i+l)!==c(r,l)){h=!1;break}if(h)return i}return-1}function w(t,r,e,n){e=Number(e)||0;var o=t.length-e;n?(n=Number(n))>o&&(n=o):n=o;var i=r.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;u<n;++u){var s=parseInt(r.substr(2*u,2),16);if(isNaN(s))return u;t[e+u]=s}return u}function b(t,r,e,n){return q(N(r,t.length-e),t,e,n)}function S(t,r,e,n){return q(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,n)}function E(t,r,e,n){return S(t,r,e,n)}function A(t,r,e,n){return q(z(r),t,e,n)}function P(t,r,e,n){return q(function(t,r){for(var e,n,o,i=[],u=0;u<t.length&&!((r-=2)<0);++u)e=t.charCodeAt(u),n=e>>8,o=e%256,i.push(o),i.push(n);return i}(r,t.length-e),t,e,n)}function R(t,r,e){return 0===r&&e===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(r,e))}function T(t,r,e){e=Math.min(t.length,e);for(var n=[],o=r;o<e;){var i,u,s,a,c=t[o],f=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=e)switch(h){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(a=(31&c)<<6|63&i)>127&&(f=a);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&(a=(15&c)<<12|(63&i)<<6|63&u)>2047&&(a<55296||a>57343)&&(f=a);break;case 4:i=t[o+1],u=t[o+2],s=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&s)&&(a=(15&c)<<18|(63&i)<<12|(63&u)<<6|63&s)>65535&&a<1114112&&(f=a)}null===f?(f=65533,h=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=h}return function(t){var r=t.length;if(r<=O)return String.fromCharCode.apply(String,t);var e="",n=0;for(;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=O));return e}(n)}r.Buffer=a,r.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},r.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=u(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,r,e){return c(null,t,r,e)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,r,e){return function(t,r,e,n){return f(r),r<=0?s(t,r):void 0!==e?"string"==typeof n?s(t,r).fill(e,n):s(t,r).fill(e):s(t,r)}(null,t,r,e)},a.allocUnsafe=function(t){return h(null,t)},a.allocUnsafeSlow=function(t){return h(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,r){if(!a.isBuffer(t)||!a.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,o=0,i=Math.min(e,n);o<i;++o)if(t[o]!==r[o]){e=t[o],n=r[o];break}return e<n?-1:n<e?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,r){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var n=a.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!a.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(n,o),o+=u.length}return n},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)y(this,r,r+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)y(this,r,r+3),y(this,r+1,r+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)y(this,r,r+7),y(this,r+1,r+6),y(this,r+2,r+5),y(this,r+3,r+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,r,e,n,o){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),r<0||e>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&r>=e)return 0;if(n>=o)return-1;if(r>=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(i,u),c=this.slice(n,o),f=t.slice(r,e),h=0;h<s;++h)if(c[h]!==f[h]){i=c[h],u=f[h];break}return i<u?-1:u<i?1:0},a.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},a.prototype.indexOf=function(t,r,e){return m(this,t,r,e,!0)},a.prototype.lastIndexOf=function(t,r,e){return m(this,t,r,e,!1)},a.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var o=this.length-r;if((void 0===e||e>o)&&(e=o),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,t,r,e);case"utf8":case"utf-8":return b(this,t,r,e);case"ascii":return S(this,t,r,e);case"latin1":case"binary":return E(this,t,r,e);case"base64":return A(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r,e);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function _(t,r,e){var n="";e=Math.min(t.length,e);for(var o=r;o<e;++o)n+=String.fromCharCode(127&t[o]);return n}function x(t,r,e){var n="";e=Math.min(t.length,e);for(var o=r;o<e;++o)n+=String.fromCharCode(t[o]);return n}function C(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var o="",i=r;i<e;++i)o+=F(t[i]);return o}function B(t,r,e){for(var n=t.slice(r,e),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function D(t,r,e,n,o,i){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<i)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function U(t,r,e,n){r<0&&(r=65535+r+1);for(var o=0,i=Math.min(t.length-e,2);o<i;++o)t[e+o]=(r&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function M(t,r,e,n){r<0&&(r=4294967295+r+1);for(var o=0,i=Math.min(t.length-e,4);o<i;++o)t[e+o]=r>>>8*(n?o:3-o)&255}function k(t,r,e,n,o,i){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,e,n,i){return i||k(t,0,e,4),o.write(t,r,e,n,23,4),e+4}function L(t,r,e,n,i){return i||k(t,0,e,8),o.write(t,r,e,n,52,8),e+8}a.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),a.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=a.prototype;else{var o=r-t;e=new a(o,void 0);for(var i=0;i<o;++i)e[i]=this[i+t]}return e},a.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||I(t,r,this.length);for(var n=this[t],o=1,i=0;++i<r&&(o*=256);)n+=this[t+i]*o;return n},a.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||I(t,r,this.length);for(var n=this[t+--r],o=1;r>0&&(o*=256);)n+=this[t+--r]*o;return n},a.prototype.readUInt8=function(t,r){return r||I(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,r){return r||I(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,r){return r||I(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,r){return r||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,r){return r||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||I(t,r,this.length);for(var n=this[t],o=1,i=0;++i<r&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*r)),n},a.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||I(t,r,this.length);for(var n=r,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*r)),i},a.prototype.readInt8=function(t,r){return r||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,r){r||I(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt16BE=function(t,r){r||I(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt32LE=function(t,r){return r||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,r){return r||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,r){return r||I(t,4,this.length),o.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,r){return r||I(t,4,this.length),o.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,r){return r||I(t,8,this.length),o.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,r){return r||I(t,8,this.length),o.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||D(this,t,r,e,Math.pow(2,8*e)-1,0);var o=1,i=0;for(this[r]=255&t;++i<e&&(o*=256);)this[r+i]=t/o&255;return r+e},a.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||D(this,t,r,e,Math.pow(2,8*e)-1,0);var o=e-1,i=1;for(this[r+o]=255&t;--o>=0&&(i*=256);)this[r+o]=t/i&255;return r+e},a.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},a.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):U(this,t,r,!0),r+2},a.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):U(this,t,r,!1),r+2},a.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):M(this,t,r,!0),r+4},a.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):M(this,t,r,!1),r+4},a.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var o=Math.pow(2,8*e-1);D(this,t,r,e,o-1,-o)}var i=0,u=1,s=0;for(this[r]=255&t;++i<e&&(u*=256);)t<0&&0===s&&0!==this[r+i-1]&&(s=1),this[r+i]=(t/u>>0)-s&255;return r+e},a.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var o=Math.pow(2,8*e-1);D(this,t,r,e,o-1,-o)}var i=e-1,u=1,s=0;for(this[r+i]=255&t;--i>=0&&(u*=256);)t<0&&0===s&&0!==this[r+i+1]&&(s=1),this[r+i]=(t/u>>0)-s&255;return r+e},a.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},a.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):U(this,t,r,!0),r+2},a.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):U(this,t,r,!1),r+2},a.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):M(this,t,r,!0),r+4},a.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||D(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):M(this,t,r,!1),r+4},a.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},a.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},a.prototype.writeDoubleLE=function(t,r,e){return L(this,t,r,!0,e)},a.prototype.writeDoubleBE=function(t,r,e){return L(this,t,r,!1,e)},a.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var o,i=n-e;if(this===t&&e<r&&r<n)for(o=i-1;o>=0;--o)t[o+r]=this[o+e];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+r]=this[o+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+i),r);return i},a.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var i;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(i=r;i<e;++i)this[i]=t;else{var u=a.isBuffer(t)?t:N(new a(t,n).toString()),s=u.length;for(i=0;i<e-r;++i)this[i+r]=u[i%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,r){var e;r=r||1/0;for(var n=t.length,o=null,i=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!o){if(e>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(r-=3)>-1&&i.push(239,191,189),o=e;continue}e=65536+(o-55296<<10|e-56320)}else o&&(r-=3)>-1&&i.push(239,191,189);if(o=null,e<128){if((r-=1)<0)break;i.push(e)}else if(e<2048){if((r-=2)<0)break;i.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;i.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return i}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,r,e,n){for(var o=0;o<n&&!(o+e>=r.length||o>=t.length);++o)r[o+e]=t[o];return o}}).call(this,e(6))},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,r,e){"use strict";r.byteLength=function(t){var r=c(t),e=r[0],n=r[1];return 3*(e+n)/4-n},r.toByteArray=function(t){var r,e,n=c(t),u=n[0],s=n[1],a=new i(function(t,r,e){return 3*(r+e)/4-e}(0,u,s)),f=0,h=s>0?u-4:u;for(e=0;e<h;e+=4)r=o[t.charCodeAt(e)]<<18|o[t.charCodeAt(e+1)]<<12|o[t.charCodeAt(e+2)]<<6|o[t.charCodeAt(e+3)],a[f++]=r>>16&255,a[f++]=r>>8&255,a[f++]=255&r;2===s&&(r=o[t.charCodeAt(e)]<<2|o[t.charCodeAt(e+1)]>>4,a[f++]=255&r);1===s&&(r=o[t.charCodeAt(e)]<<10|o[t.charCodeAt(e+1)]<<4|o[t.charCodeAt(e+2)]>>2,a[f++]=r>>8&255,a[f++]=255&r);return a},r.fromByteArray=function(t){for(var r,e=t.length,o=e%3,i=[],u=0,s=e-o;u<s;u+=16383)i.push(f(t,u,u+16383>s?s:u+16383));1===o?(r=t[e-1],i.push(n[r>>2]+n[r<<4&63]+"==")):2===o&&(r=(t[e-2]<<8)+t[e-1],i.push(n[r>>10]+n[r>>4&63]+n[r<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=u.length;s<a;++s)n[s]=u[s],o[u.charCodeAt(s)]=s;function c(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function f(t,r,e){for(var o,i,u=[],s=r;s<e;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),u.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,r){r.read=function(t,r,e,n,o){var i,u,s=8*o-n-1,a=(1<<s)-1,c=a>>1,f=-7,h=e?o-1:0,l=e?-1:1,p=t[r+h];for(h+=l,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+t[r+h],h+=l,f-=8);for(u=i&(1<<-f)-1,i>>=-f,f+=n;f>0;u=256*u+t[r+h],h+=l,f-=8);if(0===i)i=1-c;else{if(i===a)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),i-=c}return(p?-1:1)*u*Math.pow(2,i-n)},r.write=function(t,r,e,n,o,i){var u,s,a,c=8*i-o-1,f=(1<<c)-1,h=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,u=f):(u=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-u))<1&&(u--,a*=2),(r+=u+h>=1?l/a:l*Math.pow(2,1-h))*a>=2&&(u++,a/=2),u+h>=f?(s=0,u=f):u+h>=1?(s=(r*a-1)*Math.pow(2,o),u+=h):(s=r*Math.pow(2,h-1)*Math.pow(2,o),u=0));o>=8;t[e+p]=255&s,p+=d,s/=256,o-=8);for(u=u<<o|s,c+=o;c>0;t[e+p]=255&u,p+=d,u/=256,c-=8);t[e+p-d]|=128*g}},function(t,r){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,r){var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var r=0;r<t.length;r++)t[r]=n.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(t){for(var r=[],e=0,n=0;e<t.length;e++,n+=8)r[n>>>5]|=t[e]<<24-n%32;return r},wordsToBytes:function(t){for(var r=[],e=0;e<32*t.length;e+=8)r.push(t[e>>>5]>>>24-e%32&255);return r},bytesToHex:function(t){for(var r=[],e=0;e<t.length;e++)r.push((t[e]>>>4).toString(16)),r.push((15&t[e]).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],e=0;e<t.length;e+=2)r.push(parseInt(t.substr(e,2),16));return r},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(e.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(n))>>>6-2*o);return r}},t.exports=n},,,function(t,r,e){"use strict";e.r(r);var n=function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),o=0;for(r=0;r<e;r++)for(var i=arguments[r],u=0,s=i.length;u<s;u++,o++)n[o]=i[u];return n},o=function(t){return"/"+t.split("/").reduce((function(t,r){return r.length>0&&"."!==r?".."===r?t.slice(0,t.length-1):n(t,[r]):t}),[]).join("/")},i=function(t){return 0!==t.indexOf("FSF:")?"FSF:"+o(t):t},u=function(t){return 0!==t.indexOf("FSD:")?"FSD:"+o(t):t},s=function(t){return 0!==t.indexOf("FSP:")?"FSP:"+o(t):t},a=function(t){return 0!==t.indexOf("FSO:")?"FSO:"+o(t):t},c=function(t){return function(t){return localStorage.getItem(a(t))||"nobody:nobody"}(t).split(":")},f=function(t){return c(t)[0]},h=function(t){return parseInt(localStorage.getItem(s(t))||"",16)},l=function(t){var r="";return r+=4&t?"r":"-",r+=2&t?"w":"-",r+=1&t?"x":"-"},p=function(t){return l(t>>8)+l(t>>4)+l(t>>0)},d=function(t){return h(t)>>8},g=function(t){return h(t)>>4},y=function(t){return h(t)>>0},m=function(t,r,e){return!!(e.groups.includes(function(t){return c(t)[1]}(t))&&g(t)&r)},v=function(t,r,e){return function(t,r,e){var n=e.user;return e.priveledged?!(1&r)||(1&d(t)||1&g(t)||1&y(t)):!!(n===f(t)&&d(t)&r)}(t,r,e)||m(t,r,e)||function(t,r){return!!(y(t)&r)}(t,r)},w=function(t){return t.split("/").pop()||""},b=function(t){var r=w(t).split(".");return r.length>1&&r.pop()||""},S=function(t){return t.length<1||"/"===t||"___dir___"===localStorage.getItem(u(t))},E=function(t){if(!S(t))throw new Error(["Access Error","Path is not directory",t].join(" : "))},A=function(t){var r=t.split("/");return t=r.slice(0,r.length-1).join("/")},P=function(t,r,e){if(!v(t,r,e))throw new Error(["Permissions Error","Denied "+l(r),t].join(" : "))},R=function(t,r,e){return P(A(t),r,e)},T=function(t){if(!S(t))throw new Error(["Access Error","Cannot access '"+t+"': No such file or directory",t].join(" : "))},O=function(t){return null!==localStorage.getItem(i(t))},_=function(t){if(!O(t))throw new Error(["Access Error","Cannot access '"+t+"': No such file or directory",t].join(" : "))},x=function(t,r){return r=function(t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==t.charAt(t.length-1)&&(t+="/"),t}(r||"/"),"/"!==(t=t.trim()).charAt(0)&&(t=r+t),t=o(t)},C=function(t,r){return function(t,r){for(var e=(t=A(t)).split("/"),n=2;n<=e.length;n++){var o=e.slice(0,n).join("/");E(o),P(o,1,r)}}(t=x(t,r.workingDir),r),t},B=function(t,r,e,n){var o=0;o|=r<<8,o|=e<<4,o|=n<<0,localStorage.setItem(s(t),"0x"+o.toString(16))},I=function(t,r,e,n){localStorage.setItem(a(t),[e||r.user,n||r.user].join(":"))},D=function(t,r,e){try{t=C(t,e);var n=O(t);return n?P(t,2,e):R(t,2,e),Promise.resolve(function(t,r,e,n){return e=!0===e,localStorage.setItem(i(t),r),e||(B(t,6,4,4),I(t,n)),[t,r]}(t,r,n,e))}catch(t){return Promise.reject(t)}},U=function(t){return localStorage.getItem(i(t))},M=function(t,r){try{return t=C(t,r),_(t),P(t,4,r),Promise.resolve(U(t))}catch(t){return Promise.reject(t)}},k=function(t,r){try{for(var e=function(t,r){return n([C(t,r)],r.path.map((function(r){return x(t,r)})))}(t=t.replace(/\//g,""),r),o=0;o<e.length;o++){var i=e[o];if(O(i)&&v(i,1,r))return Promise.resolve(i)}throw new Error(["FS Error",t,"Not found"].join(" : "))}catch(t){return Promise.reject(t)}},j={read:M,write:D,del:function(t,r){try{return t=C(t,r),R(t,2,r),_(t),Promise.resolve(function(t){return localStorage.removeItem(i(t)),localStorage.removeItem(s(t)),localStorage.removeItem(a(t)),t}(t))}catch(t){return Promise.reject(t)}},list:function(t,r){try{t=C(t,r),T(t),P(t,4,r);var e=function(t){var r=i(t)+"/",e=u(t)+"/",n=t.split("/").length;return Object.keys(localStorage).filter((function(t){return t.startsWith(r)||t.startsWith(e)})).filter((function(t){return t.split("/").length<=n+1})).map((function(t){var r=t.split(":");return{file:"FSF"===r[0],path:r[1]}}))}(t).map((function(t){return function(t){var r=!t.file,e=t.path,n=c(e),o=h(e);return{full:e,path:A(e),name:w(e),ext:r?"":b(e),file:!r,user:n[0],group:n[1],permBytes:o,perms:(r?"d":"-")+p(o),size:r?0:new Blob([U(e)]).size}}(t)})).sort((function(t,r){return t.full<r.full?-1:t.full>r.full?1:0}));return Promise.resolve(e)}catch(t){return Promise.reject(t)}},touch:function(t,r){return D(t,"",r)},mkdir:function(t,r){try{return function(t){t=A(t),E(t)}(t=C(t,r)),function(t){if(O(t))throw new Error(["Access Error","Path exists",t].join(" : "))}(t),R(t,2,r),Promise.resolve(function(t,r){return localStorage.setItem(u(t),"___dir___"),B(t,7,5,5),I(t,r),t}(t,r))}catch(t){return Promise.reject(t)}},getExec:k,execRead:function(t,r){return new Promise((function(e,n){k(t,r).then((function(t){M(t,r).then((function(r){return e([t,r])})).catch((function(t){return n(t)}))})).catch((function(t){return n(t)}))}))},chmod:function(t,r,e){if(t=C(t,r),_(t),"string"!=typeof e||3!==e.length)throw new Error(["FS Error",""+e,"must be 3 digits long"].join(" : "));var n=parseInt("0x"+e.charAt(1),16),o=parseInt("0x"+e.charAt(0),16),i=parseInt("0x"+e.charAt(2),16);if(r.priveledged||f(t)===r.user)return B(t,o,n,i);throw new Error(["FS ERROR",t,"Permissions can only be changed by root or owner"].join(" : "))},chown:function(t,r,e,n){try{if(t=C(t,r),T(t),r.priveledged)return Promise.resolve(I(t,r,e,n));throw new Error(["FS Error","chown","requires root"].join(" : "))}catch(t){Promise.reject(t)}}},L=function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),o=0;for(r=0;r<e;r++)for(var i=arguments[r],u=0,s=i.length;u<s;u++,o++)n[o]=i[u];return n},Y=function(){function t(t,r,e){r=r||[],e=e||"/",this.user=t.toLowerCase(),this.groups=L(r,[this.user]).filter((function(t,r,e){return e.indexOf(t)===r})).map((function(t){return t.toLowerCase()})),this.workingDir=e,this.priveledged="root"===this.user,this.path=["/bin"]}return t.prototype.setPriveledged=function(t){this.priveledged=t},t.prototype.addToPath=function(t){this.path=L(this.path,[t]).filter((function(t,r,e){return e.indexOf(t)===r}))},t.prototype.clone=function(){var r=new t(this.user+"",L(this.groups),this.workingDir+"");return r.setPriveledged(!0===this.priveledged),this.path.forEach((function(t){return r.addToPath(t+"")})),r},t}(),F=e(3),N=e.n(F),z=function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),o=0;for(r=0;r<e;r++)for(var i=arguments[r],u=0,s=i.length;u<s;u++,o++)n[o]=i[u];return n},q={},W=function(t,r){var e=N()(t);return q.hasOwnProperty(r)||(q[r]={}),q[r].hasOwnProperty(e)||(q[r][e]=function(t,r){var e=new Blob([t],{type:r});return URL.createObjectURL(e)}(t,r)),q[r][e]},H=function(t,r){if(t instanceof Y||r.hasOwnProperty("identity")&&(t=r.identity),t instanceof Y)return t.clone();throw["Process Start Failed","Missing Identity","None passed or on parent"]},J=function(){function t(t,r,e,n,o){this.id=t,this.exec=r,this.params=e,this.identity=H(n,o),this.parent=o||null,this.container=null,this.bin=[],this.dead=!1}return t.prototype.hasParent=function(){return null!==this.parent},t.prototype.intoParent=function(r){this.parent instanceof t&&this.parent.stdIn(this.id,r)},t.prototype.set=function(t,r){switch(t){case"workingDir":this.identity.workingDir=r}},t.prototype.loadBin=function(t){return this.bin.push(W(t,"text/javascript")),this},t.prototype.spawn=function(t){t.src=function(t,r){t instanceof Array||(t=[t]);var e='<html><head><meta charset = "UTF-8">';return e+=["<scrip","t>window.START_PARAMS = ",JSON.stringify(r),";</scr","ipt>"].join(""),t.forEach((function(t){return e+=['<script src="',t,'"></scr',"ipt>"].join("")})),W(e+="</head><body></body></html>","text/html")}(this.bin,this.params),this.container=t},t.prototype.isSource=function(t){return null!==this.container&&t===this.container.contentWindow},t.prototype.stdIn=function(t,r){this.message(["Std","in"],{from:t,data:r})},t.prototype.message=function(t,r,e,n){if(null!==this.container){var o=this.container.contentWindow;if(null===o)return!1;var i={type:{service:t[0],func:t[1]},data:r,id:e};return n instanceof Error&&(console.log("Error to process",this,n),n=z(["ERROR"],n.message.split(" : "))),void 0!==n&&(i.error=n),o.postMessage(i,location.origin),!0}return!1},t.prototype.respond=function(t,r,e){this.message(["response"],t,r,e)},t.prototype.kill=function(){if(this.dead=!0,null!==this.container){var t=this.container.parentNode;null!==t&&t.removeChild(this.container)}},t}(),G=function(t,r,e,n){return new(e||(e=Promise))((function(o,i){function u(t){try{a(n.next(t))}catch(t){i(t)}}function s(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(u,s)}a((n=n.apply(t,r||[])).next())}))},V=function(t,r){var e,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(t,u)}catch(t){i=[6,t],n=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},X=function(){function t(){var t=this;this.display=null,this.processes={},this.pids=0,this.pending=[],this.libJS=null,this.mainProcess=null,this.OS={FS:{list:function(t,r){return j.list(r,t.identity)}},Process:{end:function(t){return t.kill()},setSelf:function(t,r){return t.set(r.prop,r.value)},self:function(t){return Promise.resolve({exec:t.exec,identity:t.identity.clone()})},start:function(r,e){return t.startProcess(e.exec,e.params,null,r)},crash:function(r,e){t.OS.Std.out(r,e),r.kill()}},Std:{out:function(r,e){return r.hasParent()?r.intoParent(e):t.OS.Out.print({data:e,over:0})}},Out:{print:function(r){return t.output(r.data,r.over,!1)},printLn:function(r){return console.log(r),t.output(r.data,r.over,!0)}}},this.startProcess=function(r,e,n,o){if(null===t.libJS)return t.pendStart(r,e,n,o);n=n||o.identity;try{return new Promise((function(i,u){j.execRead(r,n).then((function(r){var s=r[0],a=r[1];t.pids++;var c=new J(t.pids,s,e,n,o);c.loadBin(t.libJS||""),c.loadBin("("+a+")();"),t.processes[t.pids]=c,null===t.mainProcess&&(t.mainProcess=c),t.createContainer(c.id,c).then((function(t){c.spawn(t),i([c.id,c.exec,c.params])})).catch((function(t){u(t)}))})).catch((function(t){console.log("START APP FAILED",r,e,o),u(t)}))}))}catch(t){return console.log(["Process Error",t]),Promise.reject(["Process Error",t])}},this.processContainer=document.createElement("div")}return t.prototype.output=function(t,r,e){null!==this.display&&this.display.output(t,r,e)},t.prototype.init=function(t){var r=this;this.processContainer.id="processes";var e=document.querySelector("body");null!==e&&e.append(this.processContainer),this.display=t,G(void 0,void 0,void 0,(function(){var t;return V(this,(function(r){switch(r.label){case 0:return t=new Request("osLib.bundle.js"),[4,fetch(t).then((function(t){return t.text()}))];case 1:return[2,r.sent()]}}))})).then((function(t){r.libJS=t.replace(/sourceMappingURL/g,""),r.startPending()})).catch((function(t){return console.log("FETCH LIB ERROR",t)}))},t.prototype.killProcess=function(t){var r=this.getProcessFromID(t);null!==r&&r.kill()},t.prototype.stdIn=function(t,r){null!==this.mainProcess?this.mainProcess.stdIn(t,r):console.log("STDIN",r)},t.prototype.getProcessFromSource=function(t){return Object.values(this.processes).find((function(r){return r.isSource(t)}))||null},t.prototype.getProcessFromID=function(t){return Object.values(this.processes).find((function(r){return r.id===t}))||null},t.prototype.startPending=function(){var t=this;try{this.pending.forEach((function(r){t.startProcess(r.args[0],r.args[1],r.args[2],r.args[3]).then(r.resolve).catch(r.reject)}))}catch(t){console.log("START PEND ERROR",t)}},t.prototype.pendStart=function(t,r,e,n){var o=this;return new Promise((function(i,u){o.pending.push({args:[t,r,e,n],resolve:i,reject:u})}))},t.prototype.createContainer=function(t,r){var e=document.createElement("iframe");return e.sandbox.add("allow-scripts"),e.sandbox.add("allow-same-origin"),e.setAttribute("data-exec",r.exec),e.setAttribute("data-user",r.identity.user),e.id="pid-"+t,this.processContainer.append(e),Promise.resolve(e)},t.prototype.appMessage=function(t){var r=this.getProcessFromSource(t.source);if(null!==r){var e=t.data,n=e.type;if("boot"!==n.service){var o=this.systemCall(r,n,e.data);if("string"==typeof e.id&&e.id.length>0){if(!(o instanceof Promise))throw["Syscall Error",n.service+">"+n.func,"did not return promise"];o.then((function(t){return r.respond(t,e.id)})).catch((function(t){return r.respond(null,e.id,t)}))}}else r.respond(r.params,e.id)}},t.prototype.systemCall=function(t,r,e){return this.OS.hasOwnProperty(r.service)&&this.OS[r.service].hasOwnProperty(r.func)?this.OS[r.service][r.func](t,e):Promise.reject(new Error(["PM Error","Atempt to access non-existant System Call\n"+r.service+">"+r.func,t.exec+"["+t.id+"]"].join(" : ")))},t}(),Q=function(){function t(){this.queuedItems=[],this.processManager=null,this.display=document.createElement("div"),this.input=document.createElement("span")}return t.prototype.init=function(t){var r=this;this.processManager=t,this.createDisplay(),document.addEventListener("keydown",(function(){document.activeElement!==r.input&&r.input.focus()})),document.addEventListener("click",(function(){r.input.focus()})),this.input.addEventListener("keydown",(function(t){"Enter"===t.key&&(console.log(t),r.enterText(),t.preventDefault())})),this.processQueue()},t.prototype.colourizeText=function(t){return t.split(/(?=§[0-9A-F]{6})/).map((function(t){var r=document.createElement("span");if(t.startsWith("§")){var e=t.slice(0,7);r.setAttribute("style","color:#"+e.slice(1,4)+";background-color:#"+e.slice(4,7)+";"),t=t.slice(7)}return r.textContent=t,r}))},t.prototype.breakUptext=function(t){var r=this,e=[];return t.split("\n").forEach((function(t,n,o){var i=document.createElement("span");r.colourizeText(t).forEach((function(t){i.append(t)})),e.push(i),n<o.length-1&&e.push(document.createElement("br"))})),e},t.prototype.writeToDisplay=function(t,r){var e=this;r=r||0,t.map((function(t){e.display.insertBefore(t,e.input)}))},t.prototype.reduceArrayForDisplay=function(t,r){var e=this;return t.reduce((function(t,n,o){var i=typeof n;return"string"===i||"number"===i?t+=(o<1?"":"\t")+n:n instanceof Array&&(t+=(o<1?"":"\n")+e.reduceArrayForDisplay(n,r+1)),t}),"")},t.prototype.processDisplayData=function(t){return t instanceof Array?this.reduceArrayForDisplay(t,0):"FAILED TO CONVERT FOR DISPLAY"},t.prototype.output=function(t,r,e){e=!0===e;var n="";n="string"!=typeof t?this.processDisplayData(t):t;var o=this.breakUptext(n);e&&o.push(document.createElement("br")),this.writeToDisplay(o,r)},t.prototype.prompt=function(t){console.log("PROMPT",t)},t.prototype.processQueue=function(){var t=this;this.queuedItems.map((function(r){t.writeToDisplay(r.text,r.over)}))},t.prototype.createDisplay=function(){this.display.id="output",this.display.tabIndex=-1,this.input.id="input",this.input.tabIndex=0,this.input.contentEditable="true";var t=document.querySelector("body");null!==t&&(t.append(this.display),this.display.append(this.input))},t.prototype.enterText=function(){var t=this.input.textContent||"";t.length>0&&(this.output(t,0,!0),null!==this.processManager&&this.processManager.stdIn("user",t),this.input.textContent="")},t}(),Z={ls:function(){var t,r={all:!1,human:!1,long:!1,"no-group":!1},e=0,n={a:"all",h:"human",l:"long",G:"no-group"},o=function(t){var r=CMD.Colours.white,e=CMD.Colours.black;return t.file||(r=CMD.Colours.blue),CMD.Colourize(t.name,r,e)},i=function(t,e){var n=[t,["perms\t","user",r["no-group"]?"":"group","size","name"].filter((function(t){return t.length>0}))];return e.map((function(t){return n={perms:(e=t).perms,user:e.user,group:e.group,size:e.size,name:o(e)},r["no-group"]&&delete n.group,Object.values(n);var e,n})).map((function(t){return n.push(t)})),n},u=function(n,u){var s;r.all||(u=u.filter((function(t){return!t.name.startsWith(".")}))),s=r.long?i(n,u):function(t){return t.map((function(t){return o(t)}))}(u),OS.Std.out(s),++e>=t&&OS.Process.end()},s=function(t){OS.Process.crash(t)};OS.Process.startEvent((function(e){OS.Util.loadArgs(e,r,n).then((function(r){t=r.length,r.length<1&&(r=[""],t=1),r.map((function(t){return r=t,void OS.FS.list(r).then((function(t){return u(r,t)})).catch((function(t){return s(t)}));var r}))})).catch((function(t){return s(t)}))}))},bash:function(){var t="",r="",e=window.location.origin.split("://")[1].split(":")[0]||"[MISSING HOST]",n={},o=function(n){n=!0===n,OS.Std.out((n?"\n":"")+CMD.Colourize(t+"@"+e,CMD.Colours.green)+CMD.Colourize(":",CMD.Colours.white)+CMD.Colourize(r.replace("/home/"+t,"~"),CMD.Colours.blue)+CMD.Colourize("$ ",CMD.Colours.white))},i=function(t){var r,e=(r=t.from,n.hasOwnProperty(r)?n[r]:null),o=t.data;return t.data instanceof Array&&"ERROR"===t.data[0]&&(o=e.exec.split("/").pop()+": "+t.data[2]),OS.Std.out(o),Promise.resolve()};OS.Std.inEvent((function(t){if("user"===t.from){if("string"==typeof t.data)if("§§§§§cancel§§§§§"===t.data)o();else{var r=t.data.split(" ").map((function(t){return t.trim()})),e=r.shift()||"";OS.Process.start(e,r).then((function(t){console.log("BASH APP START SUCCES",t,n),n[t[0]]={pid:t[0],exec:t[1],args:t[2]}})).catch((function(t){console.log("EXEC ERROR",t);try{"FS Error"===t[1]&&"Not found"===t[3]?OS.Std.out(e+": command not found"):OS.Std.out(t[1])}catch(t){OS.Std.out(["BASH LAUNCH ERROR",t.message])}o(!0)}))}}else console.log("BASH STD IN",t.data),i(t).then((function(){o(!0)}))})),OS.Process.startEvent((function(){OS.Process.self().then((function(e){t=e.identity.user,r=e.identity.workingDir,o()}))}))},mkdir:function(){var t=[["Usage: mkdir[OPTION]...DIRECTORY..."],["Create the DIRECTORY(ies), if they do not already exist."],[""],["Mandatory arguments to long options are mandatory for short options too."],["  - p, --parents","no error if existing, make parent directories as needed"],["  - v, --verbose","print a message for each created directory"],["  ","--help","","display this help and exit"],["  ","--version","output version information and exit"]],r=["mkdir (GNU coreutils) 0.1","Copyright(C) 2010 wlf.io.","License MIT License < https://raw.githubusercontent.com/wlfio/TSPseudoOS/master/LICENSE >.","This is free software: you are free to change and redistribute it.","There is NO WARRANTY, to the extent permitted by law.","","Written by wlf.io."].join("\n"),e={help:!1,version:!1,verbose:!1,paretns:!1},n={"?":"help",v:"verbose",p:"parents"},o=function(t){OS.Process.crash(t)},i=0;OS.Util.loadArgs(START_PARAMS,e,n).then((function(u){if(console.log(START_PARAMS,e,n,u),u.length<1&&!e.help&&!e.version)OS.Process.crash(new Error(["mkdir error","missing operand\nTry 'mkdir --help' for more information",JSON.stringify(START_PARAMS)].join(" : ")));else{if(e.help)OS.Std.out(t);else{if(!e.version)return i=u.length,void u.map((function(t){OS.FS.mkdir(t).then((function(){--i<=0&&OS.Process.end()})).catch((function(t){return o(t)}))}));OS.Std.out(r)}OS.Process.end()}})).catch((function(t){return o(t)}))}},K=new Y("root",[],"/"),$=new Y("guest",[],"/home/guest");j.mkdir("/bin",K),j.mkdir("/home",K),j.mkdir("/home/guest",K).then((function(){j.chown("/home/guest",K,"guest","guest").then((function(){j.mkdir("/home/guest/bin",$),j.write("/home/guest/test","Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",$),j.mkdir("/home/guest/bin",$)}))})),j.mkdir("/home/root",K),j.mkdir("/home/root/dir1",K),j.mkdir("/home/root/dir2",K),j.mkdir("/home/root/dir3",K),j.mkdir("/home/root/dir3/dir4",K),j.touch("/home/root/.hidden",K),j.write("/home/root/test1","test1 : 1234567890abcdefghijklmnopqrstuvwxyz",K),j.write("/home/root/test2","test2 : 1234567890abcdefghijklmnopqrstuvwxyz",K),j.write("/home/root/test3","test3 : 1234567890abcdefghijklmnopqrstuvwxyz",K),j.write("/home/root/dir3/test4","test4 : 1234567890abcdefghijklmnopqrstuvwxyz",K),Object.entries(Z).map((function(t){j.write("bin/"+t[0],t[1].toString(),K),j.chmod("bin/"+t[0],K,"755")}));var tt=new Q,rt=new X;document.addEventListener("DOMContentLoaded",(function(){tt.init(rt),rt.init(tt),tt.output([["Welcome to wlf.io TSPseudoOS v0.1 LTNS(Little To No Support)"],[""],["  * Try the command help to see what you can do"],[""],["Last Login: Fri, 25 Oct 2019 18: 57: 47 GMT"]],0,!0),window.addEventListener("message",(function(t){rt.appMessage(t)})),rt.startProcess("bash",[],$)}))}]);
//# sourceMappingURL=os.bundle.js.map